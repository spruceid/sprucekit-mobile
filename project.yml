name: ReferenceApp
options:
  bundleIdPrefix: com.spruceid.mobile
packages:
  SpruceIDMobileSdk:
    url: https://github.com/spruceid/mobile-sdk-swift
    # from: 0.0.10
    revision: 379b4a3d4550df6ab9da0e5be3406d8021dcd253
    # path: "../mobile-sdk-swift"
  SQLite:
    url: https://github.com/stephencelis/SQLite.swift.git
    revision: a95fc6df17d108bd99210db5e8a9bac90fe984b8
    version: 0.15.3
settings:
  ENABLE_USER_SCRIPT_SANDBOXING: YES
  ENABLE_MODULE_VERIFIER: YES
  DEVELOPMENT_TEAM: FZVYR3KYL4
  # "CODE_SIGN_IDENTITY": "Spruce Systems, Inc. (FZVYR3KYL4)"
targets:
  App:
    type: application
    supportedDestinations: [iOS]
    platform: iOS
    deploymentTarget: "16.4"
    sources:
      - path: "Targets/App/Sources"
        createIntermediateGroups: true
      - path: "Resources"
        createIntermediateGroups: true
    dependencies:
      - target: AppAppKit
      - target: AppUIKit
    info:
      path: Info.plist
      properties:
        CFBundleVersion: "0.0.3"
        CFBundleShortVersionString: "0.0.3"
        CFBundleDisplayName: "SpruceKit"
        CFBundleIconName: "AppIcon"
        CFBundlePackageType: "APPL"
        CFBundleURLTypes:
          - CFBundleTypeRole: Viewer
            CFBundleURLName: OID4VP
            CFBundleURLSchemes:
              - openid4vp
          - CFBundleTypeRole: Viewer
            CFBundleURLName: SPRUCEID
            CFBundleURLSchemes:
              - spruceid
        NSBluetoothAlwaysUsageDescription: "Secure transmission of mobile DL data"
        NSCameraUsageDescription: "We need to access your camera for scanning"
        ITSAppUsesNonExemptEncryption: "NO"
        LSRequiresIPhoneOS: true
        UIApplicationSceneManifest:
          UIApplicationSupportsMultipleScenes: false
          UISceneConfigurations: {}
        UILaunchScreen: {}
        UIRequiredDeviceCapabilities:
          - armv7
        UISupportedInterfaceOrientations:
          - UIInterfaceOrientationPortrait
        UIRequiresFullScreen: true
        UIUserInterfaceStyle: "Light"
        UIAppFonts:
          - Inter-Black.ttf
          - Inter-BlackItalic.ttf
          - Inter-Bold.ttf
          - Inter-BoldItalic.ttf
          - Inter-ExtraBold.ttf
          - Inter-ExtraBoldItalic.ttf
          - Inter-ExtraLight.ttf
          - Inter-ExtraLightItalic.ttf
          - Inter-Italic.ttf
          - Inter-Light.ttf
          - Inter-LightItalic.ttf
          - Inter-Medium.ttf
          - Inter-MediumItalic.ttf
          - Inter-Regular.ttf
          - Inter-Semibold.ttf
          - Inter-SemiboldItalic.ttf
          - Inter-Thin.ttf
          - Inter-ThinItalic.ttf
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: com.spruceid.mobile
  AppAppKit:
    type: framework
    supportedDestinations: [iOS]
    platform: iOS
    deploymentTarget: "16.4"
    sources:
      - path: "Targets/AppAppKit/Sources"
        createIntermediateGroups: true
    settings:
      base:
        INFOPLIST_FILE: Info.plist
        PRODUCT_BUNDLE_IDENTIFIER: com.spruceid.mobile.kit
  AppAppKitTests:
    type: bundle.unit-test
    supportedDestinations: [iOS]
    platform: iOS
    deploymentTarget: "16.4"
    sources:
      - path: "Targets/AppAppKit/Tests"
        createIntermediateGroups: true
    dependencies:
      - target: AppAppKit
    settings:
      base:
        INFOPLIST_FILE: Info.plist
        PRODUCT_BUNDLE_IDENTIFIER: com.spruceid.mobile.kittests
  AppUIKit:
    type: framework
    supportedDestinations: [iOS]
    platform: iOS
    deploymentTarget: "16.4"
    sources:
      - path: "Targets/AppUIKit/Sources"
        createIntermediateGroups: true
    dependencies:
      - package: SpruceIDMobileSdk
      - package: SQLite
    settings:
      base:
        INFOPLIST_FILE: Info.plist
        PRODUCT_BUNDLE_IDENTIFIER: com.spruceid.mobile.ui
  AppUIKitTests:
    type: bundle.unit-test
    supportedDestinations: [iOS]
    platform: iOS
    deploymentTarget: "16.4"
    sources:
      - path: "Targets/AppUIKit/Tests"
        createIntermediateGroups: true
    dependencies:
      - target: AppUIKit
    settings:
      base:
        INFOPLIST_FILE: Info.plist
        PRODUCT_BUNDLE_IDENTIFIER: com.spruceid.mobile.uitests
configs:
  debug: debug
  release: release
schemes:
  release:
    shared: true
    build:
      targets:
        App: [build, archive]
    run:
      targets:
        App: [run]
    archive:
      config: release
  debug:
    shared: true
    build:
      targets:
        App: [build, archive]
    run:
      targets:
        App: [run]
    archive:
      config: debug
